(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["form"],{"0c94":function(e,t,a){},1012:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("版本控制")]),a("el-breadcrumb-item",[e._v("IMEI管理")])],1),a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[a("div",[a("el-select",{attrs:{placeholder:"设计公司",filterable:!0,clearable:""},on:{change:e.handleSelectionChange},model:{value:e.queryInfo.designName,callback:function(t){e.$set(e.queryInfo,"designName",t)},expression:"queryInfo.designName"}},e._l(e.designCompanyList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),a("el-select",{staticStyle:{"padding-left":"10px"},attrs:{placeholder:"品牌商选择",filterable:!0,clearable:""},on:{change:e.handleSelectionChange},model:{value:e.queryInfo.brandName,callback:function(t){e.$set(e.queryInfo,"brandName",t)},expression:"queryInfo.brandName"}},e._l(e.brandList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),a("el-select",{staticStyle:{"padding-left":"10px"},attrs:{placeholder:"项目选择",filterable:!0,clearable:""},on:{change:e.handleSelectionChange},model:{value:e.queryInfo.projectName,callback:function(t){e.$set(e.queryInfo,"projectName",t)},expression:"queryInfo.projectName"}},e._l(e.projectlist,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),a("span",{staticStyle:{"padding-left":"20px"}},[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加")]),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.handleResetSearch()}}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.importDialogVisible=!0}}},[e._v("批量导入")]),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.imeiTemplateDownLoad()}}},[e._v("下载模板")]),a("el-button",{attrs:{type:"danger",round:"",size:"mini",icon:"el-icon-delete"},on:{click:function(t){e.delDialogVisible=!0}}},[e._v("删除指定项目IMEI")])],1)],1)]),a("el-dialog",{attrs:{title:"添加IMEI",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClose}},[a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"选择项目","label-width":"120px",prop:"projectId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目",filterable:""},model:{value:e.addForm.projectId,callback:function(t){e.$set(e.addForm,"projectId",t)},expression:"addForm.projectId"}},e._l(e.projectlist,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"IMEI",prop:"imei","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"IMEI"},model:{value:e.addForm.imei,callback:function(t){e.$set(e.addForm,"imei",t)},expression:"addForm.imei"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addImei}},[e._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"删除指定项目IMEI",visible:e.delDialogVisible,width:"50%"},on:{"update:visible":function(t){e.delDialogVisible=t},close:e.delDialogClose}},[a("el-form",{ref:"delFormRef",attrs:{model:e.delForm,rules:e.delFormRules,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"选择项目","label-width":"120px",prop:"projectId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目",filterable:""},model:{value:e.delForm.projectId,callback:function(t){e.$set(e.delForm,"projectId",t)},expression:"delForm.projectId"}},e._l(e.projectlist,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.delImeiByProject}},[e._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"批量导入IMEI",visible:e.importDialogVisible,width:"50%"},on:{"update:visible":function(t){e.importDialogVisible=t},close:e.importDialogClose}},[a("el-form",{ref:"importFormRef",attrs:{model:e.importForm,rules:e.importFormRules,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"选择项目","label-width":"120px",prop:"projectId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目",filterable:""},model:{value:e.importForm.projectId,callback:function(t){e.$set(e.importForm,"projectId",t)},expression:"importForm.projectId"}},e._l(e.projectlist,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-upload",{ref:"upload",staticClass:"upload-border-none",attrs:{action:"/api/imeiTest/excelImport",headers:{sessionKey:e.sessionKey},data:e.importForm,limit:1,"before-upload":e.handleBefore,"on-success":e.handleSuccess,accept:".xls,xlsx","auto-upload":!1,"file-list":e.fileList}},[a("el-button",{staticStyle:{display:"block",margin:"0 auto"},attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.importImeiByProject}},[e._v("确定")])],1)],1)],1),a("div",{staticClass:"table-container"},[a("el-table",{attrs:{data:e.imeiList,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"ID",width:"80px",prop:"id"}}),a("el-table-column",{attrs:{label:"设计公司",prop:"designName"}}),a("el-table-column",{attrs:{label:"品牌商",prop:"brandName"}}),a("el-table-column",{attrs:{label:"项目",prop:"projectName",width:"330px"}}),a("el-table-column",{attrs:{label:"IMEI",prop:"imei"}}),a("el-table-column",{attrs:{label:"最近修改时间",prop:"updateTime"}}),a("el-table-column",{attrs:{label:"是否启用",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.handleUpdateStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"是否黑名单",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.handleBlack(t.row)}},model:{value:t.row.blackFlag,callback:function(a){e.$set(t.row,"blackFlag",a)},expression:"scope.row.blackFlag"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",circle:"",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.handleDeleteImeiTest(t.row)}}})]}}])})],1)],1),a("div",{staticClass:"paginnation-container"},[a("el-pagination",{attrs:{"current-page":e.queryInfo.pageNo,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],n=(a("28a5"),a("96cf"),a("1da1")),o=(a("b775"),a("bc3a")),i=a.n(o);function s(e){return i.a.post("/imeiTest/deleteById/"+e)}function u(e,t){return i.a.post("/imeiTest/resetStatusById?id="+e+"&status="+t)}function d(e,t,a){return i.a.post("/imeiBlackWhite/resetStatusByProjectIdAndImei?projectId="+e+"&blackFlag="+a+"&imei="+t)}var c={versionId:null,brandName:"",productName:"",designName:"",projectName:"",pageNo:1,pageSize:15},p={data:function(){return{imeiList:[],projectlist:[],totalSize:0,brandList:[],designCompanyList:[],queryInfo:Object.assign({},c),addDialogVisible:!1,delDialogVisible:!1,importDialogVisible:!1,addForm:{projectId:"",imei:""},delForm:{projectId:""},importForm:{projectId:""},addFormRules:{projectId:[{required:!0,message:"请选项目",trigger:"blur"}],imei:[{required:!0,message:"IMEI必填",trigger:"blur"}]},delFormRules:{projectId:[{required:!0,message:"请选项目",trigger:"blur"}]},importFormRules:{projectId:[{required:!0,message:"请选项目",trigger:"blur"}]},fileList:[]}},created:function(){this.getProjectList(),this.getBrandList(),this.getDesignCompanyList(),this.getImeiList(),this.sessionKey=localStorage.getItem("sessionKey")},methods:{getImeiList:function(){var e=this;this.$http.get("/imeiTest/queryPage",{params:this.queryInfo}).then((function(t){if(t=t.data,console.log("测试IMEI返回",t),0!==t.code)return e.$message.error("获取IMEI列表失败！");e.imeiList=t.data.list,e.totalSize=t.data.totalSize}))},handleSelectionChange:function(){this.getImeiList()},getProjectList:function(){var e=this;this.$http.get("/project/queryPage",{params:this.queryInfo}).then((function(t){if(t=t.data,0!==t.code)return e.$message.error("获取项目列表失败！");e.projectlist=[];for(var a=t.data.list,r=0;r<a.length;r++)e.projectlist.push({label:a[r].projectName,value:a[r].id})}))},getBrandList:function(){var e=this;this.$http.get("/brand/queryPage",{params:this.queryInfo}).then((function(t){t=t.data,e.brandList=[];for(var a=t.data.list,r=0;r<a.length;r++)e.brandList.push({label:a[r].brandName,value:a[r].id})}))},getDesignCompanyList:function(){var e=this;this.$http.get("/designCompany/queryPage",{params:this.queryInfo}).then((function(t){t=t.data,e.designCompanyList=[];for(var a=t.data.list,r=0;r<a.length;r++)e.designCompanyList.push({label:a[r].designName,value:a[r].id})}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getImeiList()},handleCurrentChange:function(e){this.queryInfo.pageNo=e,this.getImeiList()},handleDeleteImeiTest:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("----当前------",t),e.next=3,this.$confirm("此操作将永久删除该测试IMEI, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return console.log("删除测试IMEI",e),e}));case 3:if(a=e.sent,"confirm"===a){e.next=6;break}return e.abrupt("return",this.$message.info("已经取消删除！"));case 6:return e.next=8,s(t.id);case 8:if(r=e.sent,l=r.data,0===l.code){e.next=12;break}return e.abrupt("return",this.$message.error("删除失败！"));case 12:this.$message.success("删除成功！"),this.getImeiList();case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleUpdateStatus:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u(t.id,t.status);case 2:if(a=e.sent,r=a.data,0==r.code){e.next=7;break}return 0===t.status?t.status=1:t.status=0,e.abrupt("return",this.$message.error(r.msg));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),imeiTemplateDownLoad:function(){i.a.get("/template/download?templateName=imeiTestImportTemplate",{responseType:"arraybuffer"}).then((function(e){var t=decodeURI(e.headers["content-disposition"].split(";")[1].split("=")[1]),a=new Blob([e.data],{type:"application/vnd.ms-excel"}),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=t,l.click(),URL.revokeObjectURL(r)})).catch((function(e){}))},handleBlack:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d(t.projectId,t.imei,t.blackFlag);case 2:if(a=e.sent,r=a.data,0==r.code){e.next=7;break}return 0===t.blackFlag?t.blackFlag=1:t.blackFlag=0,e.abrupt("return",this.$message.error(r.msg));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),projectCreate:function(){this.$router.push("/project/create")},handleResetSearch:function(){this.queryInfo=Object.assign({},c),this.getImeiList()},addDialogClose:function(){this.$refs.addFormRef.resetFields()},delDialogClose:function(){this.$refs.delFormRef.resetFields()},importDialogClose:function(){this.$refs.importFormRef.resetFields(),this.fileList=[]},addImei:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("/imeiTest/create",e.addForm);case 4:r=t.sent,l=r.data,0!==l.code&&e.$message.error("添加IMEI失败！"+JSON.stringify(l.data)),e.addDialogVisible=!1,e.getImeiList();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},delImeiByProject:function(){var e=this;this.$refs.delFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,l,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$confirm("此操作将永久删除该项目的所有IMEI, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return console.log("此操作将永久删除该项目的所有IMEI",e),e}));case 4:if(r=t.sent,"confirm"===r){t.next=8;break}return e.delDialogVisible=!1,t.abrupt("return",e.$message.info("已经取消删除！"));case 8:return t.next=10,e.$http.post("/imeiTest/deleteByProjectId/"+e.delForm.projectId);case 10:l=t.sent,n=l.data,0!==n.code&&e.$message.error("删除指定项目IMEI失败！"+JSON.stringify(n.data)),e.delDialogVisible=!1,e.getImeiList();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},importImeiByProject:function(){var e=this;this.$refs.importFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:e.$refs.upload.submit();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleBefore:function(e){},handleSuccess:function(e){this.$refs.upload.clearFiles(),0==e.code?(this.importDialogVisible=!1,this.$message.success("导入成功！"),this.getImeiList()):this.$message.error("导入失败")},handleRemove:function(e,t){console.log(e,t)}}},m=p,b=(a("a3d5"),a("2877")),f=Object(b["a"])(m,r,l,!1,null,null,null);t["default"]=f.exports},"1da1":function(e,t,a){"use strict";function r(e,t,a,r,l,n,o){try{var i=e[n](o),s=i.value}catch(u){return void a(u)}i.done?t(s):Promise.resolve(s).then(r,l)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(l,n){var o=e.apply(t,a);function i(e){r(o,l,n,i,s,"next",e)}function s(e){r(o,l,n,i,s,"throw",e)}i(void 0)}))}}a.d(t,"a",(function(){return l}))},4448:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("版本控制")]),a("el-breadcrumb-item",[e._v("版本管理")])],1),a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[a("el-select",{attrs:{placeholder:"设计公司",filterable:!0,clearable:""},on:{change:e.handleSelectionChange},model:{value:e.queryInfo.designName,callback:function(t){e.$set(e.queryInfo,"designName",t)},expression:"queryInfo.designName"}},e._l(e.designCompanyList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),a("el-select",{staticStyle:{"padding-left":"10px"},attrs:{placeholder:"品牌商选择",filterable:!0,clearable:""},on:{change:e.handleSelectionChange},model:{value:e.queryInfo.brandName,callback:function(t){e.$set(e.queryInfo,"brandName",t)},expression:"queryInfo.brandName"}},e._l(e.brandList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),a("el-select",{staticStyle:{"padding-left":"10px"},attrs:{placeholder:"项目选择",filterable:!0,clearable:""},on:{change:e.handleSelectionChange},model:{value:e.queryInfo.projectName,callback:function(t){e.$set(e.queryInfo,"projectName",t)},expression:"queryInfo.projectName"}},e._l(e.projectlist,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),a("span",{staticStyle:{"padding-left":"20px"}},[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.getVersionList()}}},[e._v("查询")]),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.handleResetSearch()}}},[e._v("重置")]),a("el-button",{staticClass:"btn-add",attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.handleAddVersion()}}},[e._v("添加最新版本")])],1)],1),a("el-dialog",{attrs:{title:"添加项目",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"设计公司",prop:"designId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设计公司",filterable:""},model:{value:e.addForm.designId,callback:function(t){e.$set(e.addForm,"designId",t)},expression:"addForm.designId"}},e._l(e.designCompanyList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"品牌商",prop:"brandId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择品牌商",filterable:""},model:{value:e.addForm.brandId,callback:function(t){e.$set(e.addForm,"brandId",t)},expression:"addForm.brandId"}},e._l(e.brandList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"OEM",prop:"oem"}},[a("el-input",{attrs:{placeholder:"原始设备制造商"},model:{value:e.addForm.oem,callback:function(t){e.$set(e.addForm,"oem",t)},expression:"addForm.oem"}})],1),a("el-form-item",{attrs:{label:"PRODUCT",prop:"productName"}},[a("el-input",{attrs:{placeholder:"产品名称",s:""},model:{value:e.addForm.productName,callback:function(t){e.$set(e.addForm,"productName",t)},expression:"addForm.productName"}})],1),a("el-form-item",{attrs:{label:"LANGUAGE",prop:"language"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"语言",filterable:""},model:{value:e.addForm.language,callback:function(t){e.$set(e.addForm,"language",t)},expression:"addForm.language"}},e._l(e.languages,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"OPERATOR",prop:"operator"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"操作",filterable:""},model:{value:e.addForm.operator,callback:function(t){e.$set(e.addForm,"operator",t)},expression:"addForm.operator"}},e._l(e.operators,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addRroject}},[e._v("确 定")])],1)],1)],1),a("div",{staticClass:"table-container"},[a("el-table",{attrs:{data:e.versionList,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"版本ID",width:"80px",prop:"versionId"}}),a("el-table-column",{attrs:{label:"设计公司",prop:"designName",width:"120px"}}),a("el-table-column",{attrs:{label:"品牌商",prop:"brandName",width:"120px"}}),a("el-table-column",{attrs:{label:"项目",prop:"projectName",width:"340px"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),a("el-table-column",{attrs:{label:"版本号",prop:"versionNo"}}),a("el-table-column",{attrs:{label:"版本状态",prop:"status",width:"400px"}}),a("el-table-column",{attrs:{label:"备注",prop:"memo"}}),a("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",circle:"",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.handleDeleteVersion(t.row)}}}),a("el-button",{attrs:{type:"info",round:"",icon:"el-icon-setting",disabled:e.computeStatus(t.row.status),size:"mini"},on:{click:function(a){return e.handleBeforeVersion(t.row)}}},[e._v("设置")]),a("el-button",{attrs:{type:"warning",round:"",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.handleEditVersion(t.row)}}},[e._v("编辑")])]}}])})],1)],1),a("div",{staticClass:"paginnation-container"},[a("el-pagination",{attrs:{"current-page":e.queryInfo.pageNo,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],n=(a("96cf"),a("1da1")),o=a("e2fe"),i={versionId:null,brandName:"",productName:"",designName:"",projectName:"",pageNo:1,pageSize:15},s={inject:["reload"],data:function(){return{projectlist:[],versionList:[],totalSize:0,brandList:[],designCompanyList:[],queryInfo:Object.assign({},i),addDialogVisible:!1,addForm:{designId:"",brandId:"",oem:"",language:"",operator:"",productName:""},operators:[{value:"other",label:"other"},{value:"CMCC",label:"CMCC"},{value:"CU",label:"CU"}],languages:[{value:"zh-CN",label:"中文"},{value:"en-US",label:"英文"},{value:"ja-JP",label:"日语"}],addFormRules:{designId:[{required:!0,message:"请选择设计公司",trigger:"blur"}],brandId:[{required:!0,message:"请选择品牌商",trigger:"blur"}],productName:[{required:!0,message:"请输入产品名称",trigger:"blur"}],oem:[{required:!0,message:"请输入OEM",trigger:"blur"}],language:[{required:!0,message:"请输入语言",trigger:"blur"}],operator:[{required:!0,message:"请输入OPERATOR",trigger:"blur"}]}}},created:function(){this.getProjectList(),this.getBrandList(),this.getDesignCompanyList(),this.getVersionList()},methods:{getVersionList:function(){var e=this;this.$http.get("/version/queryVersionPage",{params:this.queryInfo}).then((function(t){if(t=t.data,console.log("版本返回",t),0!==t.code)return e.$message.error("获取版本列表失败！");e.versionList=t.data.list,e.totalSize=t.data.totalSize}))},getProjectList:function(){var e=this;this.$http.get("/project/queryPage",{params:this.queryInfo}).then((function(t){if(t=t.data,0!==t.code)return e.$message.error("获取项目列表失败！");e.projectlist=[];for(var a=t.data.list,r=0;r<a.length;r++)e.projectlist.push({label:a[r].projectName,value:a[r].id})}))},getBrandList:function(){var e=this;this.$http.get("/brand/queryPage",{params:this.queryInfo}).then((function(t){t=t.data,e.brandList=[];for(var a=t.data.list,r=0;r<a.length;r++)e.brandList.push({label:a[r].brandName,value:a[r].id})}))},getDesignCompanyList:function(){var e=this;this.$http.get("/designCompany/queryPage",{params:this.queryInfo}).then((function(t){t=t.data,e.designCompanyList=[];for(var a=t.data.list,r=0;r<a.length;r++)e.designCompanyList.push({label:a[r].designName,value:a[r].id})}))},handleSelectionChange:function(){this.getVersionList()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getVersionList()},handleCurrentChange:function(e){this.queryInfo.pageNo=e,this.getVersionList()},handleDeleteVersion:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("----当前版本行------",t),e.next=3,this.$confirm("此操作将永久删除该版本, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return console.log("删除版本失败",e),e}));case 3:if(a=e.sent,"confirm"===a){e.next=6;break}return e.abrupt("return",this.$message.info("已经取消删除！"));case 6:return console.log("版本id",t.versionId),e.next=9,Object(o["a"])(t.versionId);case 9:if(r=e.sent,l=r.data,0===l.code){e.next=13;break}return e.abrupt("return",this.$message.error("删除失败！"));case 13:this.getVersionList(),this.$message.success("删除成功！");case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),projectCreate:function(){this.$router.push("/project/create")},handleResetSearch:function(){this.queryInfo=Object.assign({},i),this.getVersionList()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addRroject:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("/project/create",e.addForm);case 4:r=t.sent,l=r.data,0!==l.code&&e.$message.error("添加项目失败！"+JSON.stringify(l.data)),e.addDialogVisible=!1,e.getProjectList();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleAddVersion:function(){this.$router.push({path:"/versionAdd"})},handleBeforeVersion:function(e){this.$router.push({path:"/versionDetail",query:{updateVersionNo:e.versionNo,updateVersionId:e.versionId,projectName:e.projectName}})},handleEditVersion:function(e){this.$router.push({path:"/versionUpdate",query:{versionId:e.versionId}})},computeStatus:function(e){return"初始版本"==e}}},u=s,d=(a("e47b"),a("2877")),c=Object(d["a"])(u,r,l,!1,null,"3f505264",null);t["default"]=c.exports},"6d22":function(e,t,a){},"76c4":function(e,t,a){"use strict";var r=a("9488"),l=a.n(r);l.a},8724:function(e,t,a){},9488:function(e,t,a){},a3d5:function(e,t,a){"use strict";var r=a("0c94"),l=a.n(r);l.a},b775:function(e,t){},ba87:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));a("b775");var r=a("bc3a"),l=a.n(r);function n(e){return l.a.post("/version/updateVersionDetailStatus",e)}function o(e){return l.a.post("/version//updateVersionDetail",e)}function i(){return l.a.get("/version/queryLanguageAll")}},e2fe:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o}));a("b775");var r=a("bc3a"),l=a.n(r);function n(e){return l.a.get("/version/queryVersion/"+e)}function o(e){return l.a.post("/version/delete?id="+e)}},e307:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("版本控制")]),a("el-breadcrumb-item",[e._v("项目管理")])],1),a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[a("div",[a("el-select",{attrs:{placeholder:"设计公司",filterable:!0,clearable:""},on:{change:e.handleSelectionChange},model:{value:e.queryInfo.designName,callback:function(t){e.$set(e.queryInfo,"designName",t)},expression:"queryInfo.designName"}},e._l(e.designCompanyList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),a("el-select",{staticStyle:{"padding-left":"10px"},attrs:{placeholder:"品牌商选择",filterable:!0,clearable:""},on:{change:e.handleSelectionChange},model:{value:e.queryInfo.brandName,callback:function(t){e.$set(e.queryInfo,"brandName",t)},expression:"queryInfo.brandName"}},e._l(e.brandList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),a("span",{staticStyle:{"padding-left":"20px"}},[a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.getProjectList()}}},[e._v(" 查询")]),a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.handleResetSearch()}}},[e._v(" 重置 ")]),a("el-button",{staticClass:"btn-add",attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v(" 添加 ")])],1)],1)]),a("el-dialog",{attrs:{title:"添加项目",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"设计公司",prop:"designId","label-width":"120px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设计公司",filterable:""},model:{value:e.addForm.designId,callback:function(t){e.$set(e.addForm,"designId",t)},expression:"addForm.designId"}},e._l(e.designCompanyList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"品牌商",prop:"brandId","label-width":"120px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择品牌商",filterable:""},model:{value:e.addForm.brandId,callback:function(t){e.$set(e.addForm,"brandId",t)},expression:"addForm.brandId"}},e._l(e.brandList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"OEM",prop:"oem","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"原始设备制造商"},model:{value:e.addForm.oem,callback:function(t){e.$set(e.addForm,"oem",t)},expression:"addForm.oem"}})],1),a("el-form-item",{attrs:{label:"PRODUCT","label-width":"120px",prop:"productName"}},[a("el-input",{attrs:{placeholder:"产品名称",s:""},model:{value:e.addForm.productName,callback:function(t){e.$set(e.addForm,"productName",t)},expression:"addForm.productName"}})],1),a("el-form-item",{attrs:{label:"LANGUAGE",prop:"language","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"语言"},model:{value:e.addForm.language,callback:function(t){e.$set(e.addForm,"language",t)},expression:"addForm.language"}})],1),a("el-form-item",{attrs:{label:"OPERATOR",prop:"operator","label-width":"120px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"操作",filterable:""},model:{value:e.addForm.operator,callback:function(t){e.$set(e.addForm,"operator",t)},expression:"addForm.operator"}},e._l(e.operators,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addRroject}},[e._v("确 定")])],1)],1)],1),a("div",{staticClass:"table-container"},[a("el-table",{attrs:{data:e.projectlist,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"设计公司",prop:"designName"}}),a("el-table-column",{attrs:{label:"品牌商",prop:"brandName"}}),a("el-table-column",{attrs:{label:"OEM",prop:"oem"}}),a("el-table-column",{attrs:{label:"productName",prop:"productName"}}),a("el-table-column",{attrs:{label:"LANGUAGE",prop:"language"}}),a("el-table-column",{attrs:{label:"OPERATOR",prop:"operator"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.createTime)+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){return e.removeById(t.row.id)}}})]}}])})],1)],1),a("div",{staticClass:"paginnation-container"},[a("el-pagination",{attrs:{"current-page":e.queryInfo.pageNo,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],n=(a("96cf"),a("1da1")),o={brandName:"",productName:"",designName:"",pageNo:1,pageSize:15},i={data:function(){return{projectlist:[],totalSize:0,brandList:[],designCompanyList:[],queryInfo:Object.assign({},o),addDialogVisible:!1,addForm:{designId:"",brandId:"",oem:"",language:"",operator:"",productName:""},operators:[{value:"other",label:"other"},{value:"CMCC",label:"CMCC"},{value:"CU",label:"CU"}],languages:[{value:"zh-CN",label:"中文"},{value:"en-US",label:"英文"},{value:"ja-JP",label:"日语"}],addFormRules:{designId:[{required:!0,message:"请选择设计公司",trigger:"blur"}],brandId:[{required:!0,message:"请选择品牌商",trigger:"blur"}],productName:[{required:!0,message:"请输入产品名称",trigger:"blur"}],oem:[{required:!0,message:"请输入OEM",trigger:"blur"}],language:[{required:!0,message:"请输入语言",trigger:"blur"}],operator:[{required:!0,message:"请输入OPERATOR",trigger:"blur"}]}}},created:function(){this.getProjectList(),this.getBrandList(),this.getDesignCompanyList()},methods:{getProjectList:function(){var e=this;this.$http.get("/project/queryPage",{params:this.queryInfo}).then((function(t){if(t=t.data,0!==t.code)return e.$message.error("获取项目列表失败！");e.projectlist=t.data.list,e.totalSize=t.data.totalSize}))},handleSelectionChange:function(){this.getProjectList()},getBrandList:function(){var e=this;this.$http.get("/brand/queryPage",{params:this.queryInfo}).then((function(t){t=t.data,e.brandList=[];for(var a=t.data.list,r=0;r<a.length;r++)e.brandList.push({label:a[r].brandName,value:a[r].id})}))},getDesignCompanyList:function(){var e=this;this.$http.get("/designCompany/queryPage",{params:this.queryInfo}).then((function(t){t=t.data,e.designCompanyList=[];for(var a=t.data.list,r=0;r<a.length;r++)e.designCompanyList.push({label:a[r].designName,value:a[r].id})}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getProjectList()},handleCurrentChange:function(e){this.queryInfo.pageNo=e,this.getProjectList()},removeById:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=e.sent,"confirm"===a){e.next=5;break}return e.abrupt("return",this.$message.info("已经取消删除！"));case 5:return e.next=7,this.$http.post("/project/delete/"+t);case 7:if(r=e.sent,l=r.data,0===l.code){e.next=11;break}return e.abrupt("return",this.$message.error("删除失败！"));case 11:this.$message.success("删除成功！"),this.getProjectList();case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleResetSearch:function(){this.queryInfo=Object.assign({},o),this.getProjectList()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addRroject:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("/project/create",e.addForm);case 4:r=t.sent,l=r.data,0!==l.code&&e.$message.error("添加项目失败！"+JSON.stringify(l.data)),e.addDialogVisible=!1,e.getProjectList();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},s=i,u=(a("ead5"),a("2877")),d=Object(u["a"])(s,r,l,!1,null,"764810b7",null);t["default"]=d.exports},e47b:function(e,t,a){"use strict";var r=a("6d22"),l=a.n(r);l.a},ead5:function(e,t,a){"use strict";var r=a("8724"),l=a.n(r);l.a},ebb5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("版本控制")]),a("el-breadcrumb-item",[e._v("历史版本")])],1),a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[a("span",[e._v("项目："+e._s(e.projectName)+" 升级版本号:"+e._s(e.updateVersionNo))]),a("div",{staticStyle:{"margin-top":"15px"}})])],1),a("div",{staticClass:"table-container"},[a("el-table",{attrs:{data:e.versionDetailList,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"版本详情ID",prop:"id",width:"100px"}}),a("el-table-column",{attrs:{label:"源版本号",prop:"oldVersionNo",width:"385px"}}),a("el-table-column",{attrs:{label:"文件名",prop:"fileName",width:"250px"}}),a("el-table-column",{attrs:{label:"大小",prop:"fileSize",width:"120px"}}),a("el-table-column",{attrs:{label:"上传升级包",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(a){return e.handleUpLoadBigFile(t.row)}}},[e._v("上传"),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)]}}])}),a("el-table-column",{attrs:{label:"升级策略",prop:"strategy",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:1===t.row.status||0===t.row.status,type:"text",size:"mini"},on:{click:function(a){return e.versionStrategy(t.row)}}},[e._v(" 定制配置")])]}}])}),a("el-table-column",{attrs:{label:"当前状态",width:"130px",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.computeStatus(t.row.status)))])]}}])}),a("el-table-column",{attrs:{label:"发布时间",prop:"releaseTime",width:"190px"}}),a("el-table-column",{attrs:{label:"是否启用",prop:"useFlag",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.handleUpdateUseFlag(t.row)}},model:{value:t.row.useFlag,callback:function(a){e.$set(t.row,"useFlag",a)},expression:"scope.row.useFlag"}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("el-button",{attrs:{size:"mini",type:"info",round:"",disabled:""}},[e._v("待上传"),a("i",{staticClass:"el-icon--right"})]):e._e(),2===t.row.status?a("el-button",{attrs:{size:"mini",type:"success",round:""},on:{click:function(a){return e.handleUpdateVersioStatus(t.row,4)}}},[e._v("测试通过")]):e._e(),2===t.row.status?a("el-button",{attrs:{size:"mini",type:"warning",round:""},on:{click:function(a){return e.handleUpdateVersioStatus(t.row,3)}}},[e._v("测试不通过")]):e._e(),3===t.row.status?a("el-button",{attrs:{size:"mini",type:"warning",round:"",disabled:""}},[e._v("测试不通过 ")]):e._e(),4===t.row.status?a("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(a){return e.handleUpdateVersioStatus(t.row,5)}}},[e._v("发布")]):e._e(),5===t.row.status?a("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(a){return e.handleUpdateVersioStatus(t.row,2)}}},[e._v("取消发布")]):e._e()]}}])})],1)],1),a("div",{staticClass:"paginnation-container"},[a("el-pagination",{attrs:{"current-page":e.queryInfo.pageNo,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"config-container"},[a("el-dialog",{attrs:{title:"版本定制策略",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[a("el-form",{ref:"addFormRef",attrs:{model:e.addStrategyForm,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"当前版本号",prop:"currentVersionNo","label-width":"120px"}},[e._v(" "+e._s(e.addStrategyForm.currentVersionNo)+" ")]),a("el-form-item",{attrs:{label:"升级版本号",prop:"updateVersionNo","label-width":"120px"}},[e._v(" "+e._s(e.addStrategyForm.updateVersionNo)+" ")]),a("el-form-item",{attrs:{label:"升级包名称",prop:"fileName","label-width":"120px"}},[e._v(" "+e._s(e.addStrategyForm.fileName)+" ")]),a("el-form-item",{attrs:{label:"升级包大小",prop:"fileSize","label-width":"120px"}},[e._v(" "+e._s(e.addStrategyForm.fileSize)+" ")]),a("el-form-item",{attrs:{label:"新版本提示",prop:"updateTips","label-width":"120px"}},[[a("el-radio-group",{model:{value:e.addStrategyForm.updateTips,callback:function(t){e.$set(e.addStrategyForm,"updateTips",t)},expression:"addStrategyForm.updateTips"}},[a("el-radio",{attrs:{label:1}},[e._v("无提示")]),a("el-radio",{attrs:{label:2}},[e._v("对话框")]),a("el-radio",{attrs:{label:3}},[e._v("通知栏")])],1)]],2),a("el-form-item",{attrs:{label:"安装提示",prop:"installTips","label-width":"120px"}},[[a("el-radio-group",{model:{value:e.addStrategyForm.installTips,callback:function(t){e.$set(e.addStrategyForm,"installTips",t)},expression:"addStrategyForm.installTips"}},[a("el-radio",{attrs:{label:1}},[e._v("无提示")]),a("el-radio",{attrs:{label:2}},[e._v("通知栏")])],1)]],2),a("el-form-item",{attrs:{label:"自动下载",prop:"autoDownloadFlag","label-width":"120px"}},[[a("el-radio-group",{model:{value:e.addStrategyForm.autoDownloadFlag,callback:function(t){e.$set(e.addStrategyForm,"autoDownloadFlag",t)},expression:"addStrategyForm.autoDownloadFlag"}},[a("el-radio",{attrs:{label:1}},[e._v("以客户端为准")]),a("el-radio",{attrs:{label:2}},[e._v("否")]),a("el-radio",{attrs:{label:3}},[e._v("是-仅wifi")]),a("el-radio",{attrs:{label:4}},[e._v("是-任意网络")])],1)]],2),a("el-form-item",{attrs:{label:"自动升级",prop:"autoUpdateFlag","label-width":"120px"}},[[a("el-radio-group",{model:{value:e.addStrategyForm.autoUpdateFlag,callback:function(t){e.$set(e.addStrategyForm,"autoUpdateFlag",t)},expression:"addStrategyForm.autoUpdateFlag "}},[a("el-radio",{attrs:{label:0}},[e._v("否")]),a("el-radio",{attrs:{label:1}},[e._v("是")])],1)]],2),1==e.addStrategyForm.autoUpdateFlag?a("el-form-item",{attrs:{label:"升级时间段",prop:"autoUpdateStartTime","label-width":"120px"}},[[a("span",[e._v("开始时间")]),a("el-select",{attrs:{placeholder:"0"},model:{value:e.addStrategyForm.autoUpdateStartTime,callback:function(t){e.$set(e.addStrategyForm,"autoUpdateStartTime",t)},expression:"addStrategyForm.autoUpdateStartTime"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("span",[e._v("结束时间")]),a("el-select",{attrs:{placeholder:"24"},model:{value:e.addStrategyForm.autoUpdateEndTime,callback:function(t){e.$set(e.addStrategyForm,"autoUpdateEndTime",t)},expression:"addStrategyForm.autoUpdateEndTime"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]],2):e._e(),a("el-form-item",{attrs:{label:"升级成功提示",prop:"successTipsFlag","label-width":"120px"}},[[a("el-radio-group",{model:{value:e.addStrategyForm.successTipsFlag,callback:function(t){e.$set(e.addStrategyForm,"successTipsFlag",t)},expression:"addStrategyForm.successTipsFlag "}},[a("el-radio",{attrs:{label:0}},[e._v("否")]),a("el-radio",{attrs:{label:1}},[e._v("是")])],1)]],2),a("el-form-item",{attrs:{label:"升级电量要求",prop:"updatePowerNeed","label-width":"120px"}},[[a("div",{staticClass:"block"},[a("el-slider",{attrs:{step:5,"show-stops":""},model:{value:e.addStrategyForm.updatePowerNeed,callback:function(t){e.$set(e.addStrategyForm,"updatePowerNeed",t)},expression:"addStrategyForm.updatePowerNeed"}})],1)]],2),a("el-form-item",{attrs:{label:"是否按IMEI升级",prop:"updateImeiFlag","label-width":"120px"}},[[a("el-radio-group",{model:{value:e.addStrategyForm.updateImeiFlag,callback:function(t){e.$set(e.addStrategyForm,"updateImeiFlag",t)},expression:"addStrategyForm.updateImeiFlag "}},[a("el-radio",{attrs:{label:0}},[e._v("否")]),a("el-radio",{attrs:{label:1}},[e._v("是")])],1)]],2)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{style:{display:e.showConfirm},attrs:{type:"primary"},on:{click:e.configStrategy}},[e._v("确 定")])],1)],1)],1)],1)},l=[],n=(a("7f7f"),a("96cf"),a("1da1")),o=a("ba87"),i=(a("b775"),a("bc3a")),s=a.n(i);function u(e){return s.a.get("/version/queryByVersionDetailId/"+e)}function d(e){return s.a.post("/version/updateVersionDetailStrategy",e)}var c={pageNo:1,pageSize:15},p={data:function(){return{updateVersionNo:"",projectName:"",versionDetailList:[],totalSize:0,queryInfo:Object.assign({},c),addDialogVisible:!1,showConfirm:"",addStrategyForm:{id:null,detailVersionId:null,versionId:null,updateTips:null,installTips:null,updateRegionalFlag:null,updateRegional:null,autoDownloadFlag:null,autoUpdateFlag:null,updatePowerNeed:null,successTipsFlag:null,updateImeiFlag:null,currentVersionNo:null,updateVersionNo:null,fileName:null,fileSize:null,autoUpdateStartTime:0,autoUpdateEndTime:24},operators:[{value:"other",label:"other"},{value:"CMCC",label:"CMCC"},{value:"CU",label:"CU"}],languages:[{value:"zh-CN",label:"中文"},{value:"en-US",label:"英文"},{value:"ja-JP",label:"日语"}],updateVersionDetail:{detailId:null,useFlag:null,status:null,fileName:null},dataObj:{},ossUploadUrl:"api/aliyun/oss/upload",maxCount:1,server_config:this.global.server_config,up:{},files:[],tableData:[],uploading:!1,options:[{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"},{value:"14",label:"14"},{value:"15",label:"15"},{value:"16",label:"16"},{value:"17",label:"17"},{value:"18",label:"18"},{value:"19",label:"19"},{value:"20",label:"20"},{value:"21",label:"21"},{value:"22",label:"22"},{value:"23",label:"23"},{value:"24",label:"24"}]}},created:function(){this.getParam(),this.getVersionDetailList()},methods:{getParam:function(){var e=this.$route.query;this.queryInfo.versionId=e.updateVersionId,this.updateVersionNo=e.updateVersionNo,this.projectName=e.projectName,console.log("版本详情跳转接受的参数",e)},computeStatus:function(e){return"0"==e?"初始版本":"1"==e?"待上传":"2"==e?"待测试":"3"==e?"测试不通过":"4"==e?"待发布":"5"==e||"6"==e?"已发布":"待上传"},handleUpdateVersioStatus:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.updateVersionDetail.detailId=t.id,this.updateVersionDetail.status=a,e.next=4,Object(o["c"])(this.updateVersionDetail);case 4:if(r=e.sent,l=r.data,0==l.code){e.next=8;break}return e.abrupt("return",this.$message.error(l.msg));case 8:this.getVersionDetailList();case 9:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),handleUpdateUseFlag:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("***updateVersion****",t),this.updateVersionDetail.detailId=t.id,this.updateVersionDetail.useFlag=t.useFlag,this.updateVersionDetail.status=t.status,e.next=6,Object(o["c"])(this.updateVersionDetail);case 6:if(a=e.sent,r=a.data,0==r.code){e.next=11;break}return 0===t.useFlag?t.useFlag=1:t.useFlag=0,e.abrupt("return",this.$message.error(r.msg));case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getVersionDetailList:function(){var e=this;this.$http.get("/version/queryVersionDetailPageByVersionId",{params:this.queryInfo}).then((function(t){if(console.log("返回",t.data),t=t.data,0!=t.code)return e.$message(t.msg);e.versionDetailList=t.data.list,e.totalSize=t.data.totalSize,console.log("返回list",e.versionDetailList)}))},getUploadFileData:function(e){console.log("获取行",e),this.updateVersionDetail.detailId=e.id,this.updateVersionDetail.status=2},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getVersionDetailList()},handleCurrentChange:function(e){this.queryInfo.pageNo=e,this.getVersionDetailList()},handleRemove:function(e,t){},handlePreview:function(e){this.dialogVisible=!0},handleUploadSuccess:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var r,l,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("--res---",t),console.log("文件大小",a.size),console.log("文件类型",a.type),0==t.code){e.next=5;break}return e.abrupt("return",this.$message.error("上传文件失败，稍后重试"));case 5:return this.updateVersionDetail.downloadUrl=t.data,this.updateVersionDetail.fileName=a.name,r=a.size/1024/1024,l=!1,r<.01&&(l=!0,r=a.size/1024),this.updateVersionDetail.fileSize=r.toFixed(2)+""+(1==l?"Kb":"M"),e.next=13,Object(o["b"])(this.updateVersionDetail);case 13:n=e.sent,n.data,this.getVersionDetailList();case 16:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),addDialogClosed:function(){this.$refs.addFormRef.resetFields()},versionStrategy:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u(t.id);case 2:a=e.sent,r=a.data,console.log("策略返回",r),0!=r.code&&this.$message.error(r.msg),Object.assign(this.addStrategyForm,r.data),this.addDialogVisible=!0,3===t.status||5===t.status?this.showConfirm="none":this.showConfirm="",console.log("策略详细信息",this.addStrategyForm);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),configStrategy:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,d(e.addStrategyForm);case 4:r=t.sent,l=r.data,0!==l.code&&e.$message.error("修改配置失败！"+JSON.stringify(l.data)),e.addDialogVisible=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleUpLoadBigFile:function(e){this.$router.push({path:"/versionStopUpload",query:{currentVersionNo:e.oldVersionNo,currentVersionId:e.id,updateVersionNo:this.updateVersionNo,projectName:this.projectName}})}}},m=p,b=(a("76c4"),a("2877")),f=Object(b["a"])(m,r,l,!1,null,"31d6b76f",null);t["default"]=f.exports},ec6b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 表单 ")]),a("el-breadcrumb-item",[e._v("基本表单")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"表单名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"选择器"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[a("el-option",{key:"bbk",attrs:{label:"步步高",value:"bbk"}}),a("el-option",{key:"xtc",attrs:{label:"小天才",value:"xtc"}}),a("el-option",{key:"imoo",attrs:{label:"imoo",value:"imoo"}})],1)],1),a("el-form-item",{attrs:{label:"日期时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间"},model:{value:e.form.date2,callback:function(t){e.$set(e.form,"date2",t)},expression:"form.date2"}})],1)],1),a("el-form-item",{attrs:{label:"城市级联"}},[a("el-cascader",{attrs:{options:e.options},model:{value:e.form.options,callback:function(t){e.$set(e.form,"options",t)},expression:"form.options"}})],1),a("el-form-item",{attrs:{label:"选择开关"}},[a("el-switch",{model:{value:e.form.delivery,callback:function(t){e.$set(e.form,"delivery",t)},expression:"form.delivery"}})],1),a("el-form-item",{attrs:{label:"多选框"}},[a("el-checkbox-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-checkbox",{attrs:{label:"步步高",name:"type"}}),a("el-checkbox",{attrs:{label:"小天才",name:"type"}}),a("el-checkbox",{attrs:{label:"imoo",name:"type"}})],1)],1),a("el-form-item",{attrs:{label:"单选框"}},[a("el-radio-group",{model:{value:e.form.resource,callback:function(t){e.$set(e.form,"resource",t)},expression:"form.resource"}},[a("el-radio",{attrs:{label:"步步高"}}),a("el-radio",{attrs:{label:"小天才"}}),a("el-radio",{attrs:{label:"imoo"}})],1)],1),a("el-form-item",{attrs:{label:"文本框"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("表单提交")]),a("el-button",[e._v("取消")])],1)],1)],1)])])},l=[],n={name:"baseform",data:function(){return{options:[{value:"guangdong",label:"广东省",children:[{value:"guangzhou",label:"广州市",children:[{value:"tianhe",label:"天河区"},{value:"haizhu",label:"海珠区"}]},{value:"dongguan",label:"东莞市",children:[{value:"changan",label:"长安镇"},{value:"humen",label:"虎门镇"}]}]},{value:"hunan",label:"湖南省",children:[{value:"changsha",label:"长沙市",children:[{value:"yuelu",label:"岳麓区"}]}]}],form:{name:"",region:"",date1:"",date2:"",delivery:!0,type:["步步高"],resource:"小天才",desc:"",options:[]}}},methods:{onSubmit:function(){this.$message.success("提交成功！")}}},o=n,i=a("2877"),s=Object(i["a"])(o,r,l,!1,null,null,null);t["default"]=s.exports}}]);
//# sourceMappingURL=form.2b321dc4.js.map